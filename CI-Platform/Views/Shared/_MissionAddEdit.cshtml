@using CI_Entity.ViewModel
@model MissionVM



<style>
    output img {
        width: 100px;
        height: 100px;
    }
</style>

<div class="container mt-4">

    <h3>Add/Edit Mission</h3>
    <hr class="m-2" />

    <form asp-controller="Admin" asp-action="AddEditMission" method="post" enctype="multipart/form-data">
        <div class="row mb-5">
            <input asp-for="missionId" type="hidden" id="MissioniId" />
            <div class="col-md-6 col-12 mb-2">
                <lable>Title</lable>
                <input type="text" asp-for="title" id="Title" class="form-control" />
            </div>

            <div class="col-md-6 col-12 mb-2">
                <lable>Short Description</lable>
                <input asp-for="shortDescription" type="text" id="ShortDescription" class="form-control" />
            </div>

            <div class="col-12 mb-2">
                <lable>Description</lable>
                <textarea asp-for="description" class="form-control" id="Description"></textarea>
            </div>

            <div class="col-lg-6 col-md-6 col-12 mb-2">
                <lable>Select Country</lable>
                <select asp-for="countryId" class="form-select" id="Country">
                    @foreach (var i in Model.countries)
                    {
                        <option value="@i.CountryId">@i.Name</option>
                    }
                </select>
            </div>
            <div class="col-lg-6 col-md-6 col-12 mb-2">
                <lable>Select City</lable>
                <select asp-for="cityId" class="form-select" id="City">
                    @foreach (var i in Model.cities)
                    {
                        <option value="@i.CityId">@i.Name</option>
                    }
                </select>
            </div>

            <div class="col-lg-6 col-md-6 col-12 mb-2">
                <lable>Organisation Name</lable>
                <input asp-for="OrganisationName" type="text" class="form-control" id="OrName" />
            </div>

            <div class="col-lg-6 col-md-6 col-12 mb-2">
                <lable>Organisation Detail</lable>
                <input asp-for="OrganisationDetail" type="text" class="form-control" id="OrDetail" />
            </div>

            <div class="col-lg-4 col-md-6 col-12 mb-2">
                <lable>Select Mission Type </lable>
                <select asp-for="missionType" class="form-select" id="Type" onchange="MissionType()">
                    <option value="null" disabled selected>-- Select Mission Type--</option>
                    <option value="Goal">Goal</option>
                    <option value="Time">Time</option>
                </select>
            </div>

            <div class="col-lg-4 col-md-6 col-12 mb-2">
                <lable>Start Date</lable>
                <input asp-for="startDate" type="datetime-local" class="form-control" id="Sdate" />
            </div>
            <div class="col-lg-4 col-md-6 col-12 mb-2">
                <lable>End Date</lable>
                <input asp-for="endDate" type="datetime-local" class="form-control" id="Edate" />
            </div>

            <div class="col-lg-6 col-md-6 col-12 mb-2 ">
                <lable>Total Seats</lable>
                <input asp-for="seats" type="int" class="form-control" id="seats" />
            </div>

            <div class="col-lg-6 col-md-6 col-12 mb-2 ">
                <lable>Mission DeadLine</lable>
                <input asp-for="deadline" type="datetime-local" class="form-control" id="Deadline" />
            </div>

            <div class="col-lg-6 col-md-6 col-12 mb-2">
                <lable>Select Mission Theme </lable>x
                <select asp-for="missionThemeId" class="form-select" id="Theme">
                    @if (Model.missionThemes != null)
                    {
                        @foreach (var t in Model.missionThemes)
                        {
                            <option value="@t.MissionThemeId">@t.Title</option>
                        }
                    }
                </select>
            </div>



            <lable>Mission Theme </lable>
            <div class="user-skill-list-div form-control mb-2" id="userskilldiv" style="border:1px solid gray">
                <ul class="user-skills-list">

                    @if (Model.missionSkills != null)
                    {
                        foreach (var i in Model.missionSkills)
                        {
                            <li>@i.Skill.SkillName</li>

                        }
                    }
                </ul>
            </div>


            <div class="user-skill-list-div form-control mb-2 d-none"  style="border:1px solid gray">
                <select class="user-skills-list" id="userskilldiv2" asp-for="selectedSkills" multiple>

                </select>
            </div>



            <button class="user-add-skills-btn mb-2" data-bs-toggle="modal" type="button" data-bs-target="#addskillmodal">
                Add Skills
            </button>

            <!------------------------------------------- Skill Modal------------------------------------------------------------------------------- -->
            <div class="modal fade" id="addskillmodal" tabindex="-1" aria-labelledby="addskillmodalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="addskillmodalLabel">Add your skills</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="container  p-0">
                                <br />
                                <div class="row d-flex m-0 p-0">
                                    <select multiple style="height:300px;" id="s1" class="  px-0 col-12 col-md-5 ">

                                        @if (Model.missionSkills != null)
                                        {
                                            @foreach (var it in Model.RemainingSkill)
                                            {
                                                <option value=@it.SkillId>@it.SkillName</option>
                                            }
                                        }
                                        else
                                        {
                                            @if (Model.skills != null)
                                            {
                                                @foreach (var i in Model.skills)
                                                {
                                                    <option value=@i.SkillId>@i.SkillName</option>
                                                }
                                            }
                                        }

                                    </select>
                                    <div class="col-2 mt-5  px-2 d-md-block d-none flex-column ">
                                        <div class="mt-3 d-flex justify-content-center align-items-center ">

                                            <i class="bi bi-chevron-right py-2  px-1 skillimg" id="t1 " onclick="ved1()"></i>
                                        </div>
                                        <div class="mt-1  d-flex justify-content-center align-items-center">

                                            <i class="bi bi-chevron-left skillimg py-2  px-1" id="t2" onclick="ved2()"></i>

                                        </div>
                                        <div class="mt-1  d-flex justify-content-center align-items-center">

                                            <i class="bi bi-chevron-double-right skillimg py-2  px-1" id="t3" onclick="ved3()"></i>
                                        </div>
                                        <div class="mt-1  d-flex justify-content-center align-items-center">

                                            <i class="bi bi-chevron-double-left skillimg py-2 px-1 " id="t4" onclick="ved4()"></i>
                                        </div>
                                    </div>
                                    <div class="col-12 my-2 d-flex justify-content-center  align-items-center d-block d-md-none   px-2">

                                        <i class="bi bi-chevron-down  p-2 skillimg" id="t1 " onclick="ved1()"></i>

                                        <i class="bi bi-chevron-up skillimg p-2 ms-2" id="t2" onclick="ved2()"></i>

                                        <i class="bi bi-chevron-double-down skillimg px-2 ms-2" id="t3" onclick="ved3()"></i>

                                        <i class="bi bi-chevron-double-up skillimg px-2 ms-2" id="t4" onclick="ved4()"></i>
                                    </div>
                                    
                                    <select multiple id="s2" style="height:300px;" class=" px-0 col-12 col-md-5 ">
                                        @if (Model.missionSkills != null)
                                        {
                                            @foreach (var it in Model.missionSkills)
                                            {
                                                <option value=@it.SkillId>@it.Skill.SkillName</option>
                                            }
                                        }
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer d-flex justify-content-start" style="display: flex!important;justify-content: end!important;">
                            <button type="button" class="user-add-skill-cancel-btn modal-save-btn" id="close" data-bs-dismiss="modal">
                                Cancel
                            </button>
                            <button type="button" id="skillSave" onclick="SaveSkill()" class="user-add-skill-save-btn modal-save-btn">Save skill</button>
                        </div>
                    </div>
                </div>
            </div>


            <div class="col-12 mb-2 ">
                <lable>Select Mission Images</lable>
                <input asp-for="Images" type="file" class="file-input file form-control" id="fileInput" multiple="multiple" accept="image/png, image/jpeg">
            </div>

           
            <output class="mb-2">
                @if (Model.missionMedia != null)
                {
                    foreach (var m in Model.missionMedia)
                    {
                        <div class="image">
                            <img src="@m.MediaPath" alt="image">
                            <span onclick="deleteImage(0)" style="color:black;">×</span>
                        </div>
                    }
                }
            </output>

            <div class="col-12 mb-2 ">
                <lable>Select Mission Document</lable>
                <input asp-for="Docs" type="file" class="file-input file form-control" multiple="multiple" accept=".pdf,.doc,.xls">
            </div>



            <div class="col-12 mb-2">
                <lable>Mission Video Url</lable>
                <input type="url" class="form-control" />
            </div>

            <div class="col-12 d-flex">
                <button class="form-control modal-close-btn">Cancle</button>
                <button type="submit" class="form-control modal-save-btn">Submit</button>
            </div>

        </div>
    </form>
</div>
<script>
    function ved1() {
        var a = document.getElementById("s1");
        var c = document.getElementById("s2");

        for (var i = 0; i < a.length; i++) {
            if (a.options[i].selected == true) {
                a.options[i].selected = false
                c.add(a.options[i])

                ved1()
            }

        }
    }
    function ved2() {
        var a = document.getElementById("s1");
        var c = document.getElementById("s2");

        for (var i = 0; i < c.length; i++) {
            if (c.options[i].selected == true) {
                c.options[i].selected = false
                a.add(c.options[i])
                ved2()
            }
        }
    }
    function ved3() {
        var a = document.getElementById("s1");
        var c = document.getElementById("s2");
        for (var i = 0; i < a.length;) {
            c.add(a.options[c, i])
        }
    }
    function ved4() {
        var a = document.getElementById("s1");
        var c = document.getElementById("s2");
        for (var i = 0; i < c.length;) {
            a.add(c.options[a, i])
        }
    }


    function SaveSkill() {

        $("#userskilldiv").html($("#s2").html());

        $("#userskilldiv2").html($("#s2").html());
        //$("#userskilldiv2")
       // $("#multiselect_to2").html($("#multiselect_to").html());
         $("#userskilldiv2 option").attr("selected", "selected");
        //$("#multiselect_to1 option").addClass("bg-white");
    }


        //document.getElementById('skillSave').addEventListener("click", e => {
        //    var id = document.getElementById("MissioniId").value;
        //    alert(id);
        //    var selectedSkills = [];
        //    const skillsSelected = $('#s2 option');

        //    for (var i = 0; i < skillsSelected.length; i++) {
        //        selectedSkills.push(skillsSelected[i].value);
        //    }

        //    console.log(selectedSkills);
        //    $.ajax({
        //        url: '/Admin/Admin/SaveMissionSkills',
        //        type: 'POST',
        //        data: { selectedSkills: selectedSkills, id: id },

        //        success: function (response) {
        //            alert("save")
        //            $('#userskilldiv').html($(response).find('#userskilldiv').html());
        //            document.getElementById('close').click();

        //        },
        //        error: function () {
        //            alert("could not comment");
        //        }
        //    });
        //});

</script>
